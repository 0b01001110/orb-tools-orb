description: |
  Automatically shellcheck all of the shell scripts within a directory.

docker:
  - image: cimg/default

parameters:
  source-dir:
    description: Path containing the orb source files.
    type: string
    default: "./src/scripts"
  exclude:
    description: >
      Enter a comma-separated list, with no spaces, of errors to ignore. Example: "SC1009,SC1073"
    type: string
    default: ""

steps:
  - checkout
  - run:
      name: ShellCheck
      environment:
        SOURCE_DIR: "<<parameters.source-dir>>"
        EXCLUDED_ERRORS: "<<#parameters.exclude>>,<<parameters.exclude>><</parameters.exclude>>"
      command: <<include(scripts/shellcheck.sh)>>
